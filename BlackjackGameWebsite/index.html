<!DOCTYPE html>
<html>
    <head>
        <title>&#128116;</title>
    </head>

    <body>

        
        <!--title--------------------------------------------------------------->
        <h1>üÉè&#128176; Old man vs Casino King: BLACKJACK ‚õ∞Ô∏è &#128184;</h1><br><br>
        <!--dealer info------------------------------------------------------------------------------------------>
        <p style="color:green;" id="jakajandialog">...</p>
        <h1><p>ü§µ</p></h1>
        <p id="jakajanpojot">Dealer: 0</p>
        <p id="jakajanviimeisin">></p>
        <!--"moves"---------------------------------------------------------------------------------------------------->
        <p>--------------------------------------------------------------------------------------------------------------------</p>
        <p>&#x1F0A0;&#x1F0A0;</p>
        <h1><b><p style="color: burlywood;" id="liikkeet">...</p></b></h1>
        <p>--------------------------------------------------------------------------------------------------------------------</p>
        <!--player info----------------------------------------------------------------------------------------------->
        <p style="color:green;" id="pelaajandialog">...</p>
        <h1>&#128116;</h1>
        <p style="color:red;" id="pelaajanpojot">Player: 0</p>
        <p style="color:red;" id="pelaajanviimeisin">></p>
        <p>/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////</p>

        <!--buttons to do things with-->
        <button id="hitme">[ hit ]</button><br><br>
        <button id="stay">[ stand ]</button><br><br>
        <button id="restartti">[ restart ]</button>
    

        <!--Script portion-->

        <script>
        //Elements/////////////////////////////////////////////////
        //player
        const pelaajanpojot = document.getElementById("pelaajanpojot");
        const pelaajanviimeisin = document.getElementById("pelaajanviimeisin");
        const pelaajandialog = document.getElementById("pelaajandialog");
        //dealer
        const jakajanpojot =document.getElementById("jakajanpojot");
        const jakajanviimeisin = document.getElementById("jakajanviimeisin");
        const jakajandialog = document.getElementById("jakajandialog");
        //
        const liikkeet = document.getElementById("liikkeet");

        //Generating the stack of cards///////////////////////////////////////

        //List to be used a the basis
        let korttipakka = [["‚ô† √§ss√§" ,1 ,14],["‚ô† 2" ,2],["‚ô† 3" ,3],["‚ô† 4" ,4],["‚ô† 5" ,5],["‚ô† 6" ,6],["‚ô† 7" ,7],
            ["‚ô† 8" ,8],["‚ô† 9" ,9],["‚ô† 10" ,10],["‚ô† 11" ,11],["‚ô† 12" ,12],["‚ô† 13" ,13],["‚ô• √§ss√§" ,1 ,14],["‚ô• 2" ,2],
            ["‚ô• 3" ,3],["‚ô• 4" ,4],["‚ô• 5" ,5],["‚ô• 6" ,6],["‚ô• 7" ,7],["‚ô• 8" ,8],["‚ô• 9" ,9],["‚ô• 10", 10],
            ["‚ô• 11" ,11],["‚ô• 12" ,12],["‚ô• 13" ,13],["‚ô¶ √§ss√§", 1 ,14],["‚ô¶ 2" ,2],["‚ô¶ 3" ,3],["‚ô¶ 4" ,4],
            ["‚ô¶ 5" ,5],["‚ô¶ 6" ,6],["‚ô¶ 7" ,7],["‚ô¶ 8" ,8],["‚ô¶ 9" ,9],["‚ô¶ 10" ,10],["‚ô¶ 11" ,11],["‚ô¶ 12" ,12],
            ["‚ô¶ 13" ,13],["‚ô£ √§ss√§" ,1 ,14],["‚ô£ 2" ,2],["‚ô£ 3" ,3],["‚ô£ 4" ,4],["‚ô£ 5" ,5],["‚ô£ 6" ,6],["‚ô£ 7" ,7],
            ["‚ô£ 8" ,8],["‚ô£ 9" ,9],["‚ô£ 10" ,10],["‚ô£ 11" ,11],["‚ô£ 12" ,12],["‚ô£ 13" ,13]];

        //Shuffle the list (Fisher-Yates)
        const shuffle = (array) => { 
        for (let i = array.length - 1; i > 0; i--) { 
            const j = Math.floor(Math.random() * (i + 1)); 
            [array[i], array[j]] = [array[j], array[i]]; 
        } 
        return array; 
        }; 
        
        //Save the shuffled list here
        let sekoitettupakka = shuffle(korttipakka);

        //Save the dealer and players current hands and total point amounts here
        let pelaajank√§si = [];
        let pelaajanpisteet = 0;
        let jakajank√§si = [];
        let jakajanpisteet = 0;
       
        //resets the whole game/thing 
        function nollaus(){
            pelaajanviimeisin.innerText=(">");
            jakajanviimeisin.innerText=(">");
            pelaajanpisteet = 0;
            jakajanpisteet = 0;
            sekoitettupakka = shuffle(korttipakka);
            jakajanpojot.innerText=("Dealer:");
            pelaajanpojot.innerText=("Player:");
            stay.disabled = true;
            hitme.innerText = ("new round");
            restartti.disabled = true;
            hitme.disabled = false;
            liikkeet.innerText=("...")
            pelaajandialog.innerText=("...")
            jakajandialog.innerText=("...")
        }

        //Kun pelaaja painaa STAY nappia
        function pysyminen(){
            //jakaja voi viel√§ nostaa kortteja
            while(pelaajanpisteet >= jakajanpisteet && jakajanpisteet < 21){
                jakajanviimeinen(jakajanpisteet);
            }
            //siirryt√§√§n tarkistusfunktioon
            tarkistus(pelaajanpisteet,jakajanpisteet);
        }

        
        //NAPPIEN LUONTI///////////////////////////////////
        
        //uudet kortit pelaajille jako funktiolla
        const hitme = document.getElementById("hitme");
        hitme.addEventListener("click",jako);

        //stay nappula
        const stay = document.getElementById("stay");
        stay.addEventListener("click",pysyminen);
        stay.disabled = true;

        //pelin uudelleenk√§ynnistysnappi
        const restartti = document.getElementById("restartti");
        restartti.addEventListener("click",nollaus);
        restartti.disabled = true;


        //funktio vertailee pelaajien pisteit√§ ja laskee voittajan
        //ventin voittajan ratkaisu logiikka
        function tarkistus(pelaajanpisteet, jakajanpisteet){
            console.log(pelaajanpisteet,jakajanpisteet);
            if (pelaajanpisteet > jakajanpisteet && pelaajanpisteet < 22){
                liikkeet.innerText=(`(${pelaajanpisteet}) YOU WIN!`);
                pelaajandialog.innerText=('"Wohoo!"');
                jakajandialog.innerText=('"Grrrrrrrrrr"');
            } else if(jakajanpisteet > pelaajanpisteet && jakajanpisteet < 22){
                liikkeet.innerText=(`(${jakajanpisteet}) HOUSE WINS!`);
                pelaajandialog.innerText=('"NOOOO!"');
                jakajandialog.innerText=('"HAHAHAHAHAHAHAHAHAAH"');
            } else if(jakajanpisteet < 22 && pelaajanpisteet > 21){
                liikkeet.innerText=(`(${jakajanpisteet}) HOUSE WINS! (you went bust: ${pelaajanpisteet})`);
                pelaajandialog.innerText=('"NOOOO!"');
                jakajandialog.innerText=('"HAHAHAAHAHA"');
            } else if (pelaajanpisteet < 22 && jakajanpisteet > 21){
                liikkeet.innerText=(`(${pelaajanpisteet}) PLAYER WINS! (house went bust: ${jakajanpisteet})`);
                pelaajandialog.innerText=('"YES!"');
                jakajandialog.innerText=('"Grrrrrrrrrr"');
            } else{
                liikkeet.innerText=(`BOTH WITH ${pelaajanpisteet} = DRAW!`)
                pelaajandialog.innerText=('"..."');
                jakajandialog.innerText=('"Nice try, pal"')
            }
            //ohjelman loppu ja uudelleenk√§ynnistys:
            //aktivoi restart napin ja deaktivoi muut
            restartti.disabled = false;
            hitme.disabled=true;
            stay.disabled=true;
            }

        //jos pelaaja pysyy korteissaan, voi kone viel√§ nostaa kortteja t√§ss√§
        function jakajanviimeinen(){
            jakajank√§si.push(sekoitettupakka[0]);
            pelaajanviimeisin.innerText+=("-");
            jakajanviimeisin.innerText+=(sekoitettupakka[0][0]);
            jakajanpisteet += Number(sekoitettupakka[0][1]);
            jakajanpojot.innerText=(`dealer: ${jakajanpisteet}`);
            sekoitettupakka=sekoitettupakka.slice(1,-1);
        }

        //korttien jako funktio
        function jako(){
            liikkeet.innerText=("...")
            hitme.innerText=("[ hit ]")
            stay.disabled = false;

            //t√§ss√§ kohtaa molempien arrayhin uudet kortit:

            //kortti pelaajan pakkaan = .push()
            pelaajank√§si.push(sekoitettupakka[0]);
            //pelaajan nostama kortti n√§kyviin
            pelaajanviimeisin.innerText+=(sekoitettupakka[0][0]);
            //pelaajan nostama kortti lis√§t√§√§n pelaajan pisteisiin
            pelaajanpisteet += Number(sekoitettupakka[0][1]);
             //"nostettu" kortti pois pakasta .slicell√§()
            sekoitettupakka= sekoitettupakka.slice(1,-1);


            //kortti jakajan pakkaa
            // 15 pisteen raja, jotta peli vaikeutuisi 
            if (jakajanpisteet < 15){
            
            //kortti nostetaan samalla tavalla kuin ylemp√§n√§
            jakajank√§si.push(sekoitettupakka[0]);
            jakajanviimeisin.innerText+=(sekoitettupakka[0][0]);
            jakajanpisteet += Number(sekoitettupakka[0][1]);
            sekoitettupakka=sekoitettupakka.slice(1,-1);
            } else{ //else t√§ss√§ kohtaa siksi ett√§ kone ei nosta korttia jos >15 pistett√§
                //viimeisin kortti nosto merkit√§√§n - symbolilla
                jakajanviimeisin.innerText+=("-");
                //console.log(jakajanpisteet);
            }
            //console.log(jakajanpisteet,pelaajanpisteet);

            //pisteiden p√§ivitys n√§kyville
            pelaajanpojot.innerText=(`Player: ${pelaajanpisteet}`);
            jakajanpojot.innerText=(`Dealer: ${jakajanpisteet}`);

            //jos jommallakummalla menee yli 21 niin automaattisesti tarkistukseen tarkistus() funktiolla
            if(pelaajanpisteet > 21 || jakajanpisteet > 21){
                console.log("!!!")
                tarkistus(pelaajanpisteet,jakajanpisteet);
            }
            

        }
        </script>
    </body>
</html>
